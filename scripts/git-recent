#!/bin/bash

FORMAT="+%Y-%m-%d"
LOG_FORMAT="%ad %s"
case $(uname) in
    Darwin)
        yesterday=$(date -v "-1d" "$FORMAT")
        tomorrow=$(date -v "+1d" $FORMAT)
        today=$(date $FORMAT)
        ;;
    Linux)
        yesterday=$(date -d "-1 day" "$FORMAT")
        tomorrow=$(date -d "+1 day" $FORMAT)
        today=$(date $FORMAT)
        ;;
esac

awk_yesterday="\"${yesterday}\" <= \$0 && \$0 <= \"${today}\""
awk_today="\"${today}\" <= \$0 && \$0 <= \"${tomorrow}\""

echo "[1;37mRecent commits for $PWD[0m"
echo "[32mYesterday's commits[0m"
git log --date=iso --pretty=format:"$LOG_FORMAT" | awk "${awk_yesterday}"
echo "[32mToday's commits[0m"
git log --date=iso --pretty=format:"$LOG_FORMAT" | awk "${awk_today}"
